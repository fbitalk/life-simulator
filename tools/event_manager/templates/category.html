{% extends "base.html" %}

{% block title %}{{ display_name }}{% endblock %}

{% block breadcrumb %}
<span class="breadcrumb-sep">/</span>
<a href="{{ url_for('category', filename=filename) }}">{{ display_name }}</a>
{% endblock %}

{% block content %}
<div class="page-header">
    <h1>ğŸ·ï¸ {{ display_name }}</h1>
    <p class="subtitle">å…± {{ tags|length }} ä¸ªæ ‡ç­¾</p>
</div>

<div class="toolbar">
    <form action="{{ url_for('add_tag', filename=filename) }}" method="post" class="add-tag-form">
        <div class="form-row">
            <input type="text" name="tag_name" placeholder="æ–°æ ‡ç­¾åç§°" required>
            <input type="text" name="description" placeholder="æ ‡ç­¾æè¿°">
            <button type="submit" class="btn btn-primary">+ æ·»åŠ æ ‡ç­¾</button>
        </div>
        
        {% if filename in ['purpleEvents.js', 'pinkEvents.js'] %}
        <div class="fixed-attrs-row">
            <span class="label">å›ºå®šå±æ€§:</span>
            <input type="number" name="fixed_health" placeholder="ä½“è´¨">
            <input type="number" name="fixed_money" placeholder="å®¶å¢ƒ">
            <input type="number" name="fixed_social" placeholder="å¿«ä¹">
            <input type="number" name="fixed_intelligence" placeholder="æ™ºåŠ›">
            <input type="number" name="fixed_luck" placeholder="è¿æ°”">
            <input type="number" name="fixed_san" placeholder="å¿ƒæƒ…">
        </div>
        {% endif %}
    </form>
    <a href="{{ url_for('reload_file', filename=filename) }}" class="btn btn-secondary">ğŸ”„ é‡æ–°åŠ è½½</a>
</div>

<div class="tag-list">
    {% for tag in tags %}
    <div class="tag-item {% if tag.is_color %}tag-color{% endif %}">
        <a href="{{ url_for('tag_events', filename=filename, tag_name=tag.name) }}" class="tag-link">
            <span class="tag-name">{{ tag.name }}</span>
            <span class="tag-count">{{ tag.event_count }} ä¸ªäº‹ä»¶</span>
        </a>
        <form action="{{ url_for('delete_tag', filename=filename, tag_name=tag.name) }}" method="post"
            class="tag-delete-form" onsubmit="return confirm('ç¡®å®šè¦åˆ é™¤æ ‡ç­¾ ã€Œ{{ tag.name }}ã€ åŠå…¶æ‰€æœ‰äº‹ä»¶å—ï¼Ÿ');">
            <button type="submit" class="btn btn-danger btn-small">åˆ é™¤</button>
        </form>
    </div>
    {% else %}
    <div class="empty-state">
        <p>æš‚æ— æ ‡ç­¾</p>
        <p class="hint">ä½¿ç”¨ä¸Šæ–¹è¡¨å•æ·»åŠ ç¬¬ä¸€ä¸ªæ ‡ç­¾</p>
    </div>
    {% endfor %}
</div>
{% endblock %}